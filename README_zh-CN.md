# 说话人分离工具包

## 这个项目是什么？

这是一个为 OOMOL 平台构建的说话人分离工具包。说话人分离是自动识别和标记音频录音中"谁在什么时候说话"的过程。

**简单来说**：上传一个包含多个说话人的音频文件，这个工具会告诉你哪个说话人在什么时间说了话，即使你不知道录音中有多少个说话人。

## 使用场景

这个工具包非常适合：

- **会议转录**：识别会议录音或电话会议中的不同说话人
- **采访分析**：用精确的时间戳分离采访者和受访者的声音
- **播客处理**：为多人播客节目标注不同的说话人
- **法律和医疗文档**：创建带有说话人标注的咨询或取证记录
- **研究与分析**：研究对话模式和参与者之间的发言时间分布

## 可用模块

### 说话人分离模块

这是对音频文件进行说话人识别和标注的主要模块。

**功能：**
- 分析音频文件以识别不同的说话人
- 提供每个说话人开始和停止说话的精确时间戳
- 可以自动检测说话人数量，也可以使用预先指定的数量
- 支持重叠检测，用于检测多人同时说话的情况
- 以易读的格式输出结果（JSON 或 RTTM）

**输入参数：**
- **音频文件**：您的音频录音（支持 WAV、MP3、FLAC、M4A 格式）
- **说话人数量**（可选）：如果您知道录音中有多少个说话人，在此指定以获得更好的准确性。留空则自动检测。
- **包含重叠**（可选）：启用此选项以检测多个说话人同时说话的情况
- **输出格式**：选择 JSON（易于阅读）或 RTTM（标准研究格式）

**输出结果：**
- **说话人片段**：详细列表显示每个说话人何时说话，包括：
  - 开始时间（秒）
  - 结束时间（秒）
  - 说话人 ID（例如："SPEAKER_00"、"SPEAKER_01"）
  - 每个说话片段的持续时间
- **输出文件**：包含所有分离结果的保存文件，格式为您选择的格式

## 使用方法

### 快速开始

1. **打开 OOMOL 平台**：启动您的 OOMOL 工作空间
2. **创建工作流**：开始一个新的工作流或使用现有的工作流
3. **添加说话人分离模块**：将"说话人分离"模块拖放到您的工作流中
4. **上传您的音频**：选择要分析的音频文件
5. **配置设置**（可选）：
   - 如果已知，指定说话人数量
   - 如果需要，启用重叠检测
   - 选择您偏好的输出格式
6. **运行工作流**：点击运行并等待处理完成
7. **查看结果**：查看显示所有说话人片段和时间戳的输出表格

### 示例工作流

**场景**：您有一个包含 4 个人的团队会议录音，想知道谁在什么时候说话。

1. 添加说话人分离模块
2. 上传您的会议音频文件（例如："team-meeting.mp3"）
3. 将"说话人数量"设置为 4
4. 保持"包含重叠"为 false（除非人们经常互相打断）
5. 选择"json"作为输出格式以便于阅读
6. 运行工作流
7. 查看显示每个说话人片段的结果表格

## 输出示例

### JSON 格式输出
```json
[
  {
    "start_time": 0.5,
    "end_time": 5.2,
    "speaker_id": "SPEAKER_00"
  },
  {
    "start_time": 5.8,
    "end_time": 12.3,
    "speaker_id": "SPEAKER_01"
  }
]
```

### 可视化表格输出
该模块会自动以易读的表格形式显示结果：

| 开始时间（秒） | 结束时间（秒） | 说话人 ID | 持续时间（秒） |
|---------------|--------------|------------|--------------|
| 0.50          | 5.20         | SPEAKER_00 | 4.70         |
| 5.80          | 12.30        | SPEAKER_01 | 6.50         |

## 技术细节（供参考）

- **AI 模型**：使用 ModelScope 的先进 3D-Speaker 模型
- **支持的音频格式**：WAV、MP3、FLAC、M4A
- **处理方法**：语音活动检测 + 说话人嵌入 + 聚类
- **输出存储**：结果保存在 `/oomol-driver/oomol-storage/speaker-diarization/`

## 常见问题

**问：说话人识别的准确度如何？**
答：准确度取决于音频质量、说话人数量以及他们的声音有多独特。清晰的录音和声音区分明显的说话人会产生最佳结果。

**问：它能按姓名识别说话人吗？**
答：不能，它将说话人标记为"SPEAKER_00"、"SPEAKER_01"等。您需要根据时间戳和上下文将这些标签与实际姓名匹配。

**问：如果我不知道音频中有多少个说话人怎么办？**
答：将"说话人数量"字段留空，系统将自动检测。

**问：处理需要多长时间？**
答：处理时间因音频长度和质量而异。通常，处理 30 分钟的音频文件需要几分钟。

**问：什么样的音频质量效果最好？**
答：背景噪音最小的清晰录音效果最好。每个说话人都应该清晰可辨。

## 支持与反馈

如有问题、疑问或功能请求，请联系您的 OOMOL 平台管理员或参阅 OOMOL 文档。

## 版本

当前版本：0.0.1

---

**注意**：此工具包专为 OOMOL 平台设计，需要 OOMOL 才能运行。不能作为独立应用程序使用。
